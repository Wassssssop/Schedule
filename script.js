const scheduleData = {
  "monday": [
    {
      "time": "13:05",
      "week": "all",
      "course": "",
      "title": "",
      "teacher": "",
      "location": "",
      "additionalInfo": ""
    },
    {
      "time": "14:40",
      "week": "all",
      "course": "",
      "title": "",
      "teacher": "",
      "location": "",
      "additionalInfo": ""
    },
    {
      "time": "16:20",
      "week": "all",
      "course": "",
      "title": "",
      "teacher": "",
      "location": "",
      "additionalInfo": ""
    },
    {
      "time": "17:55",
      "week": "all",
      "course": "",
      "title": "",
      "teacher": "",
      "location": "",
      "additionalInfo": ""
    },
  ],
  "tuesday": [
    {
      "time": "13:05",
      "week": "all",
      "course": "",
      "title": "",
      "teacher": "",
      "location": "",
      "additionalInfo": ""
    },
    {
      "time": "14:40",
      "week": "all",
      "course": "Лекція",
      "title": "Міжкультурна комунікація та етикет міжнародної ввічливості в практиці діаспори",
      "teacher": "Набока С.В.",
      "location": "435 аудиторія",
      "additionalInfo": ""
    },
    {
      "time": "16:20",
      "week": "upper",
      "course": "Лекція",
      "title": "Новітня історія України",
      "teacher": "Вербовий О.В.",
      "location": "435 аудиторія",
      "additionalInfo": ""
    },
    {
      "time": "16:20",
      "week": "lower",
      "course": "Семінар",
      "title": "Новітня історія України",
      "teacher": "Шкабко С. І.",
      "location": "435 аудиторія",
      "additionalInfo": ""
    },
    {
      "time": "17:55",
      "week": "upper",
      "course": "Семінар",
      "title": "Міжкультурна комунікація та етикет міжнародної ввічливості в практиці діаспори",
      "teacher": "Набока С.В.",
      "location": "435 аудиторія",
      "additionalInfo": ""
    },    
    {
      "time": "17:55",
      "week": "lower",
      "course": "Семінар",
      "title": "Нова історія  країн Західної Європи та Північної Америки (з 15.02 по 21.05)",
      "teacher": "Кошелєв А.О.",
      "location": "435 аудиторія",
      "additionalInfo": ""
    },
  ],
  "wednesday": [
    {
      "time": "13:05",
      "week": "all",
      "course": "",
      "title": "",
      "teacher": "",
      "location": "",
      "additionalInfo": ""
    },
    {
      "time": "14:40",
      "week": "all",
      "course": "Мова",
      "title": "Англійська мова за професійним спрямуванням",
      "teacher": "Цепко Т.А.",
      "location": "435 аудиторія",
      "additionalInfo": "https://zoom.us/j/5169999552?pwd=UENVOXlJYm9hcWRQTDFnd3ZMemgzdz09"
    },
    {
      "time": "16:20",
      "week": "all",
      "course": "Мова",
      "title": "Англійська мова за професійним спрямуванням",
      "teacher": "Цепко Т.А.",
      "location": "159 аудиторія",
      "additionalInfo": ""
    },
    {
      "time": "17:55",
      "week": "upper",
      "course": "Лекція",
      "title": "Нова історія країн Азії та Африки",
      "teacher": "Сухобокова О.О.",
      "location": "450 аудиторія",
      "additionalInfo": ""
    },
    {
      "time": "17:55",
      "week": "lower",
      "course": "Семінар",
      "title": "Нова історія країн Азії та Африки",
      "teacher": "Сухобокова О.О.",
      "location": "450 аудиторія.",
      "additionalInfo": ""
    },
  ],
  "thursday": [
    {
      "time": "13:05",
      "week": "all",
      "course": "",
      "title": "",
      "teacher": "",
      "location": "",
      "additionalInfo": ""
    },    
    {
      "time": "14:40",
      "week": "upper",
      "course": "Лекція",
      "title": "Українська діаспора та збереження української традиційної спадщини",
      "teacher": "вакансія",
      "location": "150 аудиторія",
      "additionalInfo": ""
    },
    {
      "time": "14:40",
      "week": "lower",
      "course": "Семінар",
      "title": "Українська діаспора та збереження української традиційної спадщини",
      "teacher": "вакансія",
      "location": "150 аудиторія",
      "additionalInfo": ""
    },
    {
      "time": "16:20",
      "week": "upper",
      "course": "Лекція",
      "title": " Україна в контексті світової історії",
      "teacher": "Орлова Т.В.",
      "location": "425 аудиторія",
      "additionalInfo": ""
    },
    {
      "time": "16:20",
      "week": "lower",
      "course": "Семінар",
      "title": " Україна в контексті світової історії",
      "teacher": "Орлова Т.В.",
      "location": "425 аудиторія",
      "additionalInfo": ""
    },
    {
      "time": "17:55",
      "week": "upper",
      "course": "Лекція",
      "title": "Нова історія  країн Західної Європи та Північної Америки",
      "teacher": "Машевський О.П.",
      "location": "150 аудиторія",
      "additionalInfo": ""
    },
    {
      "time": "17:55",
      "week": "lower",
      "course": "Семінар",
      "title": "Нова історія  країн Західної Європи та Північної Америки",
      "teacher": "Кошелєв А.О.",
      "location": "150 аудиторія",
      "additionalInfo": ""
    },
  ],
  "friday": [
    {
      "time": "13:05",
      "week": "all",
      "course": "",
      "title": "",
      "teacher": "",
      "location": "",
      "additionalInfo": ""
    },
    {
      "time": "14:40",
      "week": "all",
      "course": "Лекція",
      "title": "Дисципліна вільного вибору",
      "teacher": "",
      "location": "Онлайн",
      "additionalInfo": "https://telegra.ph/Discipl%D1%96na-v%D1%96lnogo-viboru-studenta-03-08"
    },
  ],
};

const days = document.querySelectorAll('.day');
const scheduleContent = document.querySelectorAll('.schedule-content');
const today = new Date().getDay();
let currentDay = '';
let currentWeek = 'upper'; // Set the default week to upper
const lessonTimes = ["13:05", "14:40", "16:20", "17:55"];

function displaySchedule(day) {
  scheduleContent.forEach(content => {
    content.innerHTML = ''; // Clear existing schedule
  });
  const dayData = scheduleData[day];
  if (dayData) {
    dayData.forEach(timeSlotData => {
      if ((day !== 'sunday' && day !== 'saturday') && ((timeSlotData.week === 'all'  timeSlotData.week === currentWeek) && 
          ((!isAlternativeMode && !timeSlotData.alternative)  (isAlternativeMode && timeSlotData.alternative)))) {
        if (timeSlotData.course) {
          const classElement = document.createElement('div');
          classElement.classList.add('class');
          const courseTitle = document.createElement('strong');
          courseTitle.textContent = timeSlotData.course;
          classElement.appendChild(courseTitle);
          const title = document.createElement('p');
          title.textContent = timeSlotData.title;
          classElement.appendChild(title);
          const teacher = document.createElement('p');
          teacher.textContent = timeSlotData.teacher;
          classElement.appendChild(teacher);
          const br = document.createElement('br');
          classElement.appendChild(br);
          const location = document.createElement('p');
          location.textContent = timeSlotData.location;
          classElement.appendChild(location);
          const additionalInfo = document.createElement('p');
          if (timeSlotData.additionalInfo.includes('https')) {
            const a = document.createElement('a');
            a.href = timeSlotData.additionalInfo;
            a.textContent = timeSlotData.additionalInfo;
            additionalInfo.appendChild(a);
          } else {
            additionalInfo.textContent = timeSlotData.additionalInfo;
          }
          classElement.appendChild(additionalInfo);
          scheduleContent.forEach((content, index) => {
            if (lessonTimes[index] === timeSlotData.time) {
              content.appendChild(classElement);
            }
          });
        }
      }
    });
  }
}

days.forEach(day => {
  day.addEventListener('click', () => {
    days.forEach(d => d.classList.remove('active'));
    day.classList.add('active');
    currentDay = day.dataset.day;
    displaySchedule(currentDay);
  });
});


document.getElementById('upper-week').addEventListener('click', () => {
  currentWeek = 'upper';
  scheduleContent.forEach(content => content.innerHTML = '');
  displaySchedule(currentDay);
  document.getElementById('upper-week').classList.add('active');
  document.getElementById('lower-week').classList.remove('active');
});

document.getElementById('lower-week').addEventListener('click', () => {
  currentWeek = 'lower';
  scheduleContent.forEach(content => content.innerHTML = '');
  displaySchedule(currentDay);
  document.getElementById('lower-week').classList.add('active');
  document.getElementById('upper-week').classList.remove('active');
});


const resetActiveDay = () => {
  days.forEach(d => d.classList.remove('active'));
};


if (today !== 0) {
  const currentDayElement = days[today - 1];
  resetActiveDay();
  currentDayElement.classList.add('active');
  currentDay = currentDayElement.dataset.day;
  displaySchedule(currentDay);
}
